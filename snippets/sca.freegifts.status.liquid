<script type="text/javascript">{%raw%}(function(){if(typeof SECOMAPP==="undefined"){SECOMAPP={}};if(typeof Shopify==="undefined"){Shopify={}};SECOMAPP.fg_ver=1676463541;SECOMAPP.fg_scriptfile="freegifts_20230125.min.js";SECOMAPP.gifts_list_avai={"39610102480956":true,"39416771182652":true,"39473566122044":true,"31850999971900":true,"31851000070204":true,"31851000004668":true,"31850999939132":true,"39379380928572":true,"39360602374204":true,"884541456403":false,"841961209875":false,"90565115923":false,"90565083155":false,"39461260722236":true,"32463087927356":false,"40382830772284":true,"40396403212348":true,"40168958066748":true,"31111455047740":true,"21653976186940":false,"21573682200636":true,"32463113322556":true,"39439654551612":false,"39430440288316":true,"39550042538044":true,"31841427882044":true,"39324682944572":true,"32521329377340":true,"31577980567612":true,"31578324238396":true,"31577980633148":true,"31577980665916":true,"39423270649916":true,"32578679210044":true,"31578323943484":true,"31577980305468":true,"31577980469308":true,"31577980502076":true,"31577980534844":true,"32110039269436":true,"31855056945212":true,"31855057010748":true,"32110039105596":true,"32110039302204":true,"31672714428476":false,"32624922361916":true,"39673702219836":true,"31577980698684":true,"31577980731452":true,"31577980764220":true,"40577732214844":true};})();{%endraw%}</script>
{% assign sca_all_gift_products_ids =",4669029351484,3874683486268,4610405007420,290357505,6765620551,291296601,278984289,6586008830012,6564340629564,42474602515,120071290899,16301522963,16348938259,6626773762108,4626083708988,7021186285628,7021184647228,6691022372924,2411268440124,2411266146364,2394368344124,4451341926460,4666975223868,4685448085564,552621932604,2472712699964,3674083207,2472807137340,9530056199,4731545419836,290339409,3745072283708,3745091125308,3745043054652,3781784141884,4681695952956,9530612551,2364042313788,2364025798716,7100569616444," %}
<script data-cfasync="false" type="text/javascript">
  /* Smart Ecommerce App (SEA Inc)
  * http://www.secomapp.com
  * Do not reuse those source codes if don't have permission of us.
  * */
  {%if template =='product' and product.vendor =='freegifts' and product.metafields.secomapp['freegifts.product_url'] %}
    window.location.replace("{{product.metafields.secomapp['freegifts.product_url']}}");
  {%endif%}
  {%raw%}
  !function(){Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t,o=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&o.push(t);return o}),String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{value:function(e,t){var o=this.toString();(void 0===t||t>o.length)&&(t=o.length),t-=e.length;var r=o.indexOf(e,t);return-1!==r&&r===t},writable:!0,enumerable:!0,configurable:!0}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var o;if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),i=r.length>>>0;if(0===i)return-1;var n=+t||0;if(Math.abs(n)===1/0&&(n=0),n>=i)return-1;for(o=Math.max(n>=0?n:i-Math.abs(n),0);o<i;){if(o in r&&r[o]===e)return o;o++}return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var o,r;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),n=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(o=t),r=0;r<n;){var a;r in i&&(a=i[r],e.call(o,a,r,i)),r++}}),console=console||{},console.log=console.log||function(){},"undefined"==typeof Shopify&&(Shopify={}),"function"!=typeof Shopify.onError&&(Shopify.onError=function(){}),"undefined"==typeof SECOMAPP&&(SECOMAPP={}),SECOMAPP.removeGiftsVariant=function(e){setTimeout(function(){try{e("select option").not(".sca-fg-cart-item select option").filter(function(){var t=e(this).val(),o=e(this).text();-1!==o.indexOf(" - ")&&(o=o.slice(0,o.indexOf(" - ")));var r=[];return-1!==o.indexOf(" / ")&&(r=o.split(" / "),o=r[r.length-1]),!!(void 0!==SECOMAPP.gifts_list_avai&&void 0!==SECOMAPP.gifts_list_avai[t]||o.endsWith("% off)"))&&(e(this).parent("select").find("option").not(".sca-fg-cart-item select option").filter(function(){var r=e(this).val();return e(this).text().endsWith(o)||r==t}).remove(),e(".dropdown *,ul li,label,div").filter(function(){var r=e(this).html(),i=e(this).data("value");return r&&r.endsWith(o)||i==t}).remove(),!0)})}catch(e){console.log(e)}},500)},SECOMAPP.formatMoney=function(e,t){"string"==typeof e&&(e=e.replace(".",""));var o="",r="undefined"!=typeof Shopify&&void 0!==Shopify.money_format?Shopify.money_format:"{{amount}}",i=/\{\{\s*(\w+)\s*\}\}/,n=t||(void 0!==this.fgsettings&&"string"==typeof this.fgsettings.sca_currency_format&&this.fgsettings.sca_currency_format.indexOf("amount")>-1?this.fgsettings.sca_currency_format:null)||r;if(n.indexOf("amount_no_decimals_no_comma_separator")<0&&n.indexOf("amount_no_comma_separator_up_cents")<0&&n.indexOf("amount_up_cents")<0&&"function"==typeof Shopify.formatMoney)return Shopify.formatMoney(e,n);function a(e,t){return void 0===e?t:e}function s(e,t,o,r,i,n){if(t=a(t,2),o=a(o,","),r=a(r,"."),isNaN(e)||null==e)return 0;var s=(e=(e/100).toFixed(t)).split(".");return s[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+o)+(s[1]?i&&n?i+s[1]+n:r+s[1]:"")}switch(n.match(i)[1]){case"amount":o=s(e,2);break;case"amount_no_decimals":o=s(e,0);break;case"amount_with_comma_separator":o=s(e,2,",",".");break;case"amount_no_decimals_with_comma_separator":o=s(e,0,",",".");break;case"amount_no_decimals_no_comma_separator":o=s(e,0,"","");break;case"amount_up_cents":o=s(e,2,",","","<sup>","</sup>");break;case"amount_no_comma_separator_up_cents":o=s(e,2,"","","<sup>","</sup>")}return n.replace(i,o)},SECOMAPP.setCookie=function(e,t,o,r,i){var n=new Date;n.setTime(n.getTime()+24*o*60*60*1e3+60*r*1e3);var a="expires="+n.toUTCString();document.cookie=e+"="+t+";"+a+(i?";path="+i:";path=/")},SECOMAPP.deleteCookie=function(e,t){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; "+(t?";path="+t:";path=/")},SECOMAPP.getCookie=function(e){for(var t=e+"=",o=document.cookie.split(";"),r=0;r<o.length;r++){for(var i=o[r];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""},SECOMAPP.getQueryString=function(){for(var e={},t=window.location.search.substring(1).split("&"),o=0;o<t.length;o++){var r=t[o].split("=");if(void 0===e[r[0]])e[r[0]]=decodeURIComponent(r[1]);else if("string"==typeof e[r[0]]){var i=[e[r[0]],decodeURIComponent(r[1])];e[r[0]]=i}else e[r[0]].push(decodeURIComponent(r[1]))}return e},SECOMAPP.freegifts_product_json=function(e){if(Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{value:function(e,t){var o=this.toString();(void 0===t||t>o.length)&&(t=o.length),t-=e.length;var r=o.indexOf(e,t);return-1!==r&&r===t}}),e){if(e.options&&Array.isArray(e.options))for(var t=0;t<e.options.length;t++){if(void 0!==e.options[t]&&void 0!==e.options[t].values)if((r=e.options[t]).values&&Array.isArray(r.values))for(var o=0;o<r.values.length;o++)(r.values[o].endsWith("(Freegifts)")||r.values[o].endsWith("% off)"))&&(r.values.splice(o,1),o--)}if(e.options_with_values&&Array.isArray(e.options_with_values))for(t=0;t<e.options_with_values.length;t++){var r;if(void 0!==e.options_with_values[t]&&void 0!==e.options_with_values[t].values)if((r=e.options_with_values[t]).values&&Array.isArray(r.values))for(o=0;o<r.values.length;o++)(r.values[o].title.endsWith("(Freegifts)")||r.values[o].title.endsWith("% off)"))&&(r.values.splice(o,1),o--)}var i=e.price,n=e.price_max,a=e.price_min,s=e.compare_at_price,c=e.compare_at_price_max,f=e.compare_at_price_min;if(e.variants&&Array.isArray(e.variants))for(var p=0;e.variants.length,void 0!==e.variants[p];p++){var l=e.variants[p],u=l.option3?l.option3:l.option2?l.option2:l.option1?l.option1:l.title?l.title:"";"undefined"!=typeof SECOMAPP&&void 0!==SECOMAPP.gifts_list_avai&&void 0!==SECOMAPP.gifts_list_avai[l.id]||u.endsWith("(Freegifts)")||u.endsWith("% off)")?(e.variants.splice(p,1),p-=1):((!n||n>=l.price)&&(n=l.price,i=l.price),(!a||a<=l.price)&&(a=l.price),l.compare_at_price&&((!c||c>=l.compare_at_price)&&(c=l.compare_at_price,s=l.compare_at_price),(!f||f<=l.compare_at_price)&&(f=l.compare_at_price)),void 0!==l.available&&1==l.available&&(e.available=!0))}e.price=i,e.price_max=a==n?null:a,e.price_min=n==a?null:n,e.compare_at_price=s,e.compare_at_price_max=f,e.compare_at_price_min=c,e.price_varies=n<a,e.compare_at_price_varies=c<f}return e},SECOMAPP.fg_codes=[],""!==SECOMAPP.getCookie("sca_fg_codes")&&(SECOMAPP.fg_codes=JSON.parse(SECOMAPP.getCookie("sca_fg_codes")));var e=SECOMAPP.getQueryString();e.freegifts_code&&-1===SECOMAPP.fg_codes.indexOf(e.freegifts_code)&&(void 0!==SECOMAPP.activateOnlyOnePromoCode&&!0===SECOMAPP.activateOnlyOnePromoCode&&(SECOMAPP.fg_codes=[]),SECOMAPP.fg_codes.push(e.freegifts_code),SECOMAPP.setCookie("sca_fg_codes",JSON.stringify(SECOMAPP.fg_codes)))}();
  {%endraw%}
  ;SECOMAPP.customer={};SECOMAPP.customer.orders=[];SECOMAPP.customer.freegifts=[];{% for order in customer.orders %}SECOMAPP.customer.orders.push({"financial_status": {{order.financial_status|json}},"total_price": {{order.total_price|json}},"created_at": "{{order.created_at | date:'%s'}}" });{% for line_item in order.line_items %}{%if line_item.variant.metafields.secomapp.freegifts or line_item.variant.title contains '(Freegifts)' or line_item.vendor == 'freegifts'%}SECOMAPP.customer.freegifts.push({{line_item.variant.id}});{%endif%}{%if line_item.discount_allocations[0].discount_application.title == 'FreeGift'%}SECOMAPP.customer.freegifts.push('{{line_item.variant.id}}_{{line_item.discount_allocations[0].amount}}');{%endif%}{% endfor %}{% endfor %};SECOMAPP.customer.email={{customer.email | json}};SECOMAPP.customer.first_name={{customer.first_name | json}};SECOMAPP.customer.last_name={{customer.last_name | json}};SECOMAPP.customer.tags={{customer.tags | json}};SECOMAPP.customer.orders_count={{customer.orders_count | json}};SECOMAPP.customer.total_spent={{customer.total_spent | json}};{%if customer.last_order.financial_status =='paid' %}SECOMAPP.customer.last_order='{{customer.last_order.created_at}}';SECOMAPP.customer.last_total={{customer.last_order.total_price | json}};{% endif %}{% assign foundFreeGift=false %}{% if template contains 'cart' %}SECOMAPP.shopcart={{ cart | json }};var cic=[];{% for item in cart.items %}{%if item.product.collections%}{% capture results %}[{% for collection in item.product.collections %}{{ collection.id | json }}{% unless forloop.last %},{% endunless %}{% endfor %}]{% endcapture %}cic[{{item.id}}]={{results}};{%endif%}{% endfor %}SECOMAPP.cart_item_collection = cic;{% endif %}
</script>